function disableForm() {
  $('#formAction .form-control').length > 0 && $('#formAction .form-control').attr('disabled', 'disabled'),
    $('#formAction .custom-switch-input').length > 0 && $('#formAction .custom-switch-input').attr('disabled', 'disabled'),
    $('#formAction .selectgroup-input').length > 0 && $('#formAction .selectgroup-input').attr('disabled', 'disabled'),
    $('#formAction .colorinput-input').length > 0 && $('#formAction .colorinput-input').attr('disabled', 'disabled'),
    $('#formAction #formAreaButton').length > 0 && $('#formAction #formAreaButton').hide(),
    $('.summernote-simple').length > 0 && $('.summernote-simple').summernote('disable'),
    $('.summernote').length > 0 && $('.summernote').summernote('disable');
}
function unique(e) {
  return e.filter(function (e, t, a) {
    return t == a.indexOf(e);
  });
}

function initDataTables() {

    console.log('aquie es el codfigo');
    // datatable
    if ($('#datatable').length > 0) {
      var $dtTbl = $('#datatable');
      var options = {
        language: {
          lengthMenu: 'Mostrar _MENU_ filas por página',
          zeroRecords: 'No se encontraron datos',
          info: 'Mostrando página _PAGE_ de _PAGES_',
          infoFiltered: '(filtrado de _MAX_ registros en total)',
          search: 'Buscar',
          paginate: {
            previous: 'Anterior',
            next: 'Siguiente',
          },
          buttons: {
            copySuccess: {
              1: '1 fila copiada al portapapeles',
              _: '%d filas copiadas al portapapeles',
            },
            copyTitle: 'Copiar al portapapeles',
          },
        },
      };
  
      if ($dtTbl.data('export') === true) {
        var title = $dtTbl.data('title') && $dtTbl.data('title').replace(' ', '_').toLowerCase();
        title = title ? title + '_export' : document.title;
        options['dom'] = 'Bfrtip';
        options['buttons'] = [
          {
            attr: { id: 'copyDtBtn' },
            extend: 'copy',
            text: 'Copiar',
            className: 'btn-primary',
            title: title,
          },
          {
            attr: { id: 'csvDtBtn' },
            extend: 'csv',
            text: 'CSV',
            className: 'btn-success',
            title: title,
          },
          {
            attr: { id: 'excelDtBtn' },
            extend: 'excel',
            text: 'Excel',
            className: 'btn-success',
            title: title,
          },
          {
            attr: { id: 'pdfDtBtn' },
            extend: 'pdf',
            text: 'PDF',
            orientation: 'landscape',
            pageSize: 'Legal',
            className: 'btn-danger',
            title: title,
            customize: function (doc) {
              var colCount = new Array();
              $dtTbl.find('tbody tr:first-child td').each(function () {
                if ($(this).attr('colspan')) {
                  for (var i = 1; i <= $(this).attr('colspan'); $i++) {
                    colCount.push('*');
                  }
                } else {
                  colCount.push('*');
                }
              });
              doc.content[1].table.widths = colCount;
            },
          },
          {
            attr: { id: 'printDtBtn' },
            extend: 'print',
            text: 'Imprimir',
            className: 'btn-primary',
          },
          {
            attr: { id: 'jsonDtBtn' },
            text: 'JSON',
            className: 'btn btn-warning',
            action: function (e, dt, button, config) {
              var data = dt.buttons.exportData();
  
              $.fn.dataTable.fileSave(new Blob([JSON.stringify(data)]), title + '.json');
            },
          },
        ];
      }
      $dtTbl.DataTable(options);
    }
  
    // datatable yajra
    if ($('.yajra-datatable').length > 0) {
      var $dtTblYajra = $('.yajra-datatable');
      var options = {
        processing: true,
        serverSide: true,
        ajax: $dtTblYajra.data('ajax-url'),
        columns: JSON.parse($('#yajraColumns').val()),
        language: {
          lengthMenu: 'Mostrar _MENU_ filas por página',
          zeroRecords: 'No se encontraron datos',
          info: 'Mostrando página _PAGE_ de _PAGES_',
          infoFiltered: '(filtrado de _MAX_ registros en total)',
          search: 'Buscar',
          paginate: {
            previous: 'Anterior',
            next: 'Siguiente',
          },
          buttons: {
            copySuccess: {
              1: '1 fila copiada al portapapeles',
              _: '%d filas copiadas al portapapeles',
            },
            copyTitle: 'Copiar al portapapeles',
          },
        },
      };
  
      if ($dtTblYajra.data('export') === true) {
        var title = $dtTblYajra.data('title') && $dtTblYajra.data('title').replace(' ', '_').toLowerCase();
        title = title ? title + '_export' : document.title;
        options['dom'] = 'Bfrtip';
        options['buttons'] = [
          {
            attr: { id: 'copyDtBtn' },
            extend: 'copy',
            text: 'Copiar',
            className: 'btn-primary',
            title: title,
          },
          {
            attr: { id: 'csvDtBtn' },
            extend: 'csv',
            text: 'CSV',
            className: 'btn-success',
            title: title,
          },
          {
            attr: { id: 'excelDtBtn' },
            extend: 'excel',
            text: 'Excel',
            className: 'btn-success',
            title: title,
          },
          {
            attr: { id: 'pdfDtBtn' },
            extend: 'pdf',
            text: 'PDF',
            orientation: 'landscape',
            pageSize: 'Legal',
            className: 'btn-danger',
            title: title,
            customize: function (doc) {
              var colCount = new Array();
              $dtTblYajra.find('tbody tr:first-child td').each(function () {
                if ($(this).attr('colspan')) {
                  for (var i = 1; i <= $(this).attr('colspan'); $i++) {
                    colCount.push('*');
                  }
                } else {
                  colCount.push('*');
                }
              });
              doc.content[1].table.widths = colCount;
            },
          },
          {
            attr: { id: 'printDtBtn' },
            extend: 'print',
            text: 'Imprimir',
            className: 'btn-primary',
          },
          {
            attr: { id: 'jsonDtBtn' },
            text: 'JSON',
            className: 'btn btn-warning',
            action: function (e, dt, button, config) {
              var data = dt.buttons.exportData();
  
              $.fn.dataTable.fileSave(new Blob([JSON.stringify(data)]), title + '.json');
            },
          },
        ];
      }
      window.$dtTblYajra = $dtTblYajra.DataTable(options);
    }
  }
  

function reloadDataTable() {
  window.$dtTblYajra.ajax.reload();
}

function hapus(e, t) {
    e.preventDefault(),
      swal({
        title: '¿Estás seguro?',
        text: '¡Una vez eliminado, los datos no se podrán recuperar!',
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        buttons: { 
          cancel: { text: 'Cancelar', value: null, visible: true, className: '', closeModal: true },
          confirm: { text: 'Continuar' }
        },
      }).then(function (e) {
        e ? ($('#form-hapus').attr('action', t), document.getElementById('form-hapus').submit()) : swal('Está bien, no continuaré');
      });
  }
  
function validateEmail(e) {
  var t = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return t.test(String(e).toLowerCase());
}
function errorMsg(e) {
  swal('Error!!!', e, 'error');
}
function successMsg(e) {
  return swal('Sukses', e, 'success');
}
function showImportModal(e) {
  e.preventDefault(), $('#importModal').modal('show');
}
function showModalForm(e, t, a) {
  e.preventDefault(),
    (window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest'),
    $('#modalForm').parent().attr('action', a.replaceAll('/edit', '').replaceAll('/create', '')),
    $('#modalForm').modal('show'),
    $('#modalForm').find('.modal-body').html('memproses...'),
    $('#modalForm').find('.modal-footer').hide();
  var n = 'Tambah Data';
  'edit' === t ? (n = 'Ubah Data') : 'detail' === t && (n = 'Detail Data'),
    $('#modalForm').find('.modal-title').html(n),
    window.axios.get(a).then(function (e) {
      setTimeout(
        function () {
          $('#modalForm').find('.modal-body').html(e.data), 'detail' === t && disableForm(), 'detail' === t || $('#modalForm').find('.modal-footer').show(), initForm();
        },
        'create' === t ? 500 : 1e3
      );
    });
}

function deleteGlobal(e, t) {
    e.preventDefault(),
      swal({
        title: '¿Estás seguro?',
        text: '¡Una vez eliminado, los datos no se podrán recuperar!',
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        buttons: { 
          cancel: { text: 'Cancelar', value: null, visible: true, className: '', closeModal: true },
          confirm: { text: 'Continuar' }
        },
      }).then(function (e) {
        e
          ? 1 == $('#isAjax').val() || 1 == $('#isAjaxYajra').val()
            ? (swal('Información', 'Procesando...', 'info'),
              (window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest'),
              window.axios
                .delete(t)
                .then(function (e) {
                  1 == $('#isAjaxYajra').val() ? reloadDataTable() : getData(), successMsg(e.data.message).then(function () {});
                })
                .catch(function (e) {}))
            : ($('#formDeleteGlobal').attr('action', t), document.getElementById('formDeleteGlobal').submit())
          : swal('Información', 'Está bien, no continuaré', 'info');
      });
  }
  

function initSummernote() {
  jQuery().summernote &&
    ($('.summernote').length > 0 && $('.summernote').summernote({ dialogsInBody: !0, minHeight: 250 }),
    $('.summernote-simple').length > 0 &&
      $('.summernote-simple').summernote({
        dialogsInBody: !0,
        minHeight: 150,
        toolbar: [
          ['style', ['bold', 'italic', 'underline', 'clear']],
          ['font', ['strikethrough']],
          ['para', ['paragraph']],
        ],
      }));
}
function initSelect2() {
  $('.select2').length > 0 &&
    setTimeout(function () {
      $('.select2').each(function (e, t) {
        $(t).select2();
      });
    }, 1e3);
}
function initColorPicker() {
  $('.colorpickerinput').length > 0 && $('.colorpickerinput').colorpicker({ format: 'hex', component: '.input-group-append' });
}
function initCleave() {
  $('.currency').length > 0 && new Cleave('.currency', { numeral: !0, numeralThousandsGroupStyle: 'thousand' }),
    $('.currency_idr').length > 0 && new Cleave('.currency_idr', { numeral: !0, numeralDecimalMark: ',', delimiter: '.' });
}
function initTags() {
  $('.inputtags').length > 0 &&
    setTimeout(function () {
      $('.inputtags').tagsinput('items');
    }, 1e3);
}
function getData() {
  (window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest'),
    window.axios
      .get(window.location.href)
      .then(function (e) {
        $('#datatable-view').html(e.data.data), initDataTables(), $('#modalForm').modal('hide');
      })
      .catch(function (e) {});
}
function onSubmitForm(e) {
  e.preventDefault();
  var t = e.target,
    a = new FormData(t),
    n = t.getAttribute('action');
  $('#modalForm').find('button[type="submit"]').attr('disabled', !0).html('Menyimpan...'),
    (window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest'),
    window.axios
      .post(n, a)
      .then(function (e) {
        $('#modalForm').find('button[type="submit"]').attr('disabled', !1).html('Simpan'),
          successMsg(e.data.message).then(function () {
            '1' === $('#isAjaxYajra').val()
              ? (setTimeout(function () {
                  reloadDataTable();
                }, 1e3),
                $('#modalForm').modal('hide'))
              : getData();
          });
      })
      .catch(function (e) {
        swal('Gagal', e.response.data.message, 'error');
      });
}
function initForm() {
  initSummernote(), initSelect2(), initColorPicker(), initCleave(), initTags();
}
$(document).ready(function () {
  function e() {
    $('[data-toggle="checkall"]').length &&
      $('[data-toggle="checkall"]').each(function (e, t) {
        $(t).on('change', function () {
          var e = $(t).parent().parent().next().find('input');
          this.checked ? e.prop('checked', !0) : e.prop('checked', !1);
        });
      });
  }
  if (
    ($('.datatable').length > 0 && $('.datatable').DataTable(),
    window.innerWidth <= 425 && ($('.btn-save-form').addClass('btn-block'), $('.btn-reset-form').addClass('btn-block')),
    e(),
    $('[data-toggle="checkallmodul"]').length &&
      $('[data-toggle="checkallmodul"]').each(function (e, t) {
        $(t).on('change', function () {
          this.checked
            ? $('[data-toggle="checkall"]').each(function (e, t) {
                $(t).prop('checked', !0);
              })
            : $('[data-toggle="checkall"]').each(function (e, t) {
                $(t).prop('checked', !1);
              }),
            $('[data-toggle="checkall"]').trigger('change');
        });
      }),
    $('[data-toggle="summernote"]').length &&
      $('[data-toggle="summernote"]').each(function (e, t) {
        $(t).summernote({ height: 500 });
      }),
    $('#sapaan').length > 0)
  ) {
    var t = new Date(),
      a = t.getHours(),
      n = t.getMinutes(),
      i = '';
    a >= 18 ? (i = n >= 30 ? 'Selamat Malam' : 'Selamat Sore') : a >= 14 ? (i = 'Selamat Sore') : a >= 10 ? (i = 'Selamat Siang') : a >= 4 && (i = 'Selamat Pagi'), $('#sapaan').html(i);
  }
  if ($('#password').length > 0) {
    var r = $('#password').parents('.form-group');
    (r = r.find('.ikon2')),
      r.length > 0 &&
        (r.css({ cursor: 'pointer' }),
        r.on('click', function () {
          r.find('.fa-eye').length > 0
            ? (r.parents('.form-group').find('input').attr('type', 'text'), r.find('i').removeClass('fa-eye').addClass('fa-eye-slash'))
            : (r.parents('.form-group').find('input').attr('type', 'password'), r.find('i').addClass('fa-eye').removeClass('fa-eye-slash'));
        }));
  }
  initDataTables(),
    $('.datepicker').length > 0 &&
      ($('.datepicker').daterangepicker({ autoUpdateInput: !1, singleDatePicker: !0, showDropdowns: !0 }),
      $('.datepicker').on('apply.daterangepicker', function (e, t) {
        $(this).val(t.startDate.format('YYYY-MM-DD'));
      })),
    (window.sidebar_miniku = function () {
      var e = $(window).outerWidth();
      'undefined' != typeof SIDEBAR_MINI &&
        !0 === SIDEBAR_MINI &&
        e > 1024 &&
        setTimeout(function () {
          $('[data-toggle="sidebar"]').trigger('click');
        }, 500);
    }),
    sidebar_miniku();
}),
  $('form')
    .find('button[type="submit"]')
    .click(function (e) {
      $('.is-invalid').removeClass('is-invalid'),
        $('.invalid-feedback').remove(),
        $('.input-group-text').removeClass('border-danger'),
        $('.select2-selection--single,.select2-selection--multiple').css({ 'border-color': '#e4e6fc' }),
        $('label.text-danger').removeClass('text-danger'),
        $('.error-checkbox').remove();
      var t = $(this),
        a = t.closest('form');
      a.find('[data-toggle="summernote_message"]').empty(), a.find('.bootstrap-tagsinput').css({ 'border-color': '#e4e6fc' });
      var n = a.find('.form-control:not(.note-form-control)'),
        i = !0;
      if (
        (n.each(function (e, t) {
          if ($(t).hasClass('inputtags') && !t.value) {
            (i = !1), $(t).parent().find('.bootstrap-tagsinput').css({ 'border-color': 'red' }), $(t).addClass('is-invalid');
            var a = $(t).closest('.form-group');
            a.find('.input-group-text').addClass('border-danger');
            var n = a.find('.invalid-feedback');
            n.length <= 0 && $(t).after('<span class="invalid-feedback"></span>'), (n = a.find('.invalid-feedback'));
            var r = a.find('label').text() || '';
            (r = r.replaceAll('*', '')), n.html($(t).attr('required-message') || r + ' tidak boleh kosong'), a.find('label').addClass('text-danger');
          } else if (t.hasAttribute('required') && !t.value) {
            (i = !1), $(t).addClass('is-invalid');
            (a = $(t).closest('.form-group')), (n = a.find('.invalid-feedback'));
            $(t).parent().hasClass('colorpickerinput')
              ? n.length <= 0 && $(t).parent().after('<span class="invalid-feedback" style="display: block"></span>')
              : n.length <= 0 && $(t).after('<span class="invalid-feedback"></span>'),
              (n = a.find('.invalid-feedback')),
              n.html($(t).attr('required-message') || 'Tidak boleh kosong'),
              a.find('.input-group-text').addClass('border-danger');
            r = a.find('label').text() || '';
            (r = r.replaceAll('*', '')), n.html($(t).attr('required-message') || r + ' tidak boleh kosong');
          } else if ('email' == t.type) {
            if (!validateEmail(t.value)) {
              (i = !1), $(t).addClass('is-invalid');
              a = $(t).closest('.form-group');
              a.find('.input-group-text').addClass('border-danger');
              n = a.find('.invalid-feedback');
              n.length <= 0 && $(t).after('<span class="invalid-feedback"></span>'),
                (n = a.find('.invalid-feedback')),
                n.html($(t).attr('email-message') || 'Email tidak valid'),
                a.find('label').addClass('text-danger');
            }
          } else
            $(t).hasClass('select2') &&
              !t.value &&
              ($(t).parent().find('label').addClass('text-danger'), $(t).parent().find('.select2-selection--single,.select2-selection--multiple').css({ 'border-color': 'red' }));
        }),
        ($summernote = a.find('[data-toggle="summernote"]')),
        $summernote.length)
      ) {
        var r = $summernote[0];
        r.hasAttribute('required-message') && '<p><br></p>' == $summernote.summernote('code') && a.find('[data-toggle="summernote_message"]').html($summernote.attr('required-message')),
          $summernote.before().val($summernote.summernote('code'));
      }
      var o = a.find('.summernote');
      o.length &&
        o.each(function (e, t) {
          var n = $(t);
          if (t.hasAttribute('required') && ('<p><br></p>' == n.summernote('code') || '' == n.summernote('code'))) {
            n.parent().find('label').addClass('text-danger');
            var i = n.parent().find('label').text().replaceAll('*', '');
            a.find('[data-toggle="summernote_message"]').html(n.attr('required-message')),
              n.next().after('<div class="invalid-feedback" style="display: block; margin-top: -20px;">' + i + ' tidak boleh kosong</div>');
          }
          n.before().val(n.summernote('code'));
        });
      var l = a.find('.summernote-simple');
      l.length &&
        l.each(function (e, t) {
          var n = $(t);
          if (t.hasAttribute('required') && ('<p><br></p>' == n.summernote('code') || '' == n.summernote('code'))) {
            n.parent().find('label').addClass('text-danger');
            var i = n.parent().find('label').text().replaceAll('*', '');
            a.find('[data-toggle="summernote_message"]').html(n.attr('required-message')),
              n.next().after('<div class="invalid-feedback" style="display: block; margin-top: -20px;">' + i + ' tidak boleh kosong</div>');
          }
          n.before().val(n.summernote('code'));
        });
      var s = [];
      $('.custom-switch-input').each(function (e, t) {
        s.push({ name: t.name, required: t.required });
      }),
        (s = s
          .filter(function (e) {
            return e.required;
          })
          .map(function (e) {
            return e.name;
          })),
        (s = unique(s)),
        s.forEach(function (e) {
          if (!$('input[name="' + e + '"]:checked').val()) {
            (i = !1),
              $('input[name="' + e + '"]')
                .parent()
                .parent()
                .parent()
                .find('label')
                .addClass('text-danger');
            var t = $('input[name="' + e + '"]')
              .parent()
              .parent()
              .parent()
              .find('label:first')
              .text()
              .replaceAll('*', '');
            $('input[name="' + e + '"]')
              .parent()
              .parent()
              .after('<div class="invalid-feedback error-checkbox" style="display: block;">' + t + ' no puede estar vacío</div>');
            }
        });
      var d = [];
      $('.selectgroup-input').each(function (e, t) {
        d.push({ name: t.name, required: 1 == $(t).parent().parent().parent().data('required') });
      }),
        (d = d
          .filter(function (e) {
            return e.required;
          })
          .map(function (e) {
            return e.name;
          })),
        (d = unique(d)),
        d.forEach(function (e) {
          if (!$('input[name="' + e + '"]:checked').val()) {
            (i = !1),
              $('input[name="' + e + '"]')
                .parent()
                .parent()
                .parent()
                .find('label.form-label')
                .addClass('text-danger');
            var t = $('input[name="' + e + '"]')
              .parent()
              .parent()
              .parent()
              .find('label.form-label')
              .text()
              .replaceAll('*', '');
            $('input[name="' + e + '"]')
              .parent()
              .parent()
              .after('<div class="invalid-feedback error-checkbox" style="display: block;">' + t + ' no puede estar vacío</div>');
            }
        });
      var c = [];
      return (
        $('.colorinput-input').each(function (e, t) {
          c.push({ name: t.name, required: 1 == $(t).parent().parent().parent().parent().data('required') });
        }),
        (c = c
          .filter(function (e) {
            return e.required;
          })
          .map(function (e) {
            return e.name;
          })),
        (c = unique(c)),
        c.forEach(function (e) {
          if (!$('input[name="' + e + '"]:checked').val()) {
            (i = !1),
              $('input[name="' + e + '"]')
                .parent()
                .parent()
                .parent()
                .parent()
                .parent()
                .find('label.form-label')
                .addClass('text-danger');
            var t = $('input[name="' + e + '"]')
              .parent()
              .parent()
              .parent()
              .parent()
              .parent()
              .find('label.form-label')
              .text()
              .replaceAll('*', '');
            $('input[name="' + e + '"]')
              .parent()
              .parent()
              .parent()
              .parent()
              .after('<div class="invalid-feedback error-checkbox" style="display: block; margin-top: -25px; margin-bottom: 10px;">' + t + ' no puede estar vacío</div>');
            }
        }),
        i || ($('html, body').animate({ scrollTop: a.offset().top - 100 }, 1000), errorMsg('¡Hay un error en el formulario, por favor revisa nuevamente!!!')),
        i
      );
    }),
  $('#sessionSuccessMessage').val() && swal('Sukses', $('#sessionSuccessMessage').val(), 'success'),
  $('#sessionErrorMessage').val() && swal('Gagal', $('#sessionErrorMessage').val(), 'error'),
  $(function () {
    initSummernote(), initSelect2(), initColorPicker(), initCleave(), initTags();
  });
